<!--
    THIS EXAMPLE WAS DOWNLOADED FROM https://echarts.apache.org/examples/zh/editor.html?c=bar3d-simplex-noise&gl=1&theme=dark
-->
<!DOCTYPE html>
<html style="height: 100%" lang="zh">

<head>
  <meta charset="utf-8">
  <title>demo</title>
</head>

<body style="height: 100%; margin: 0">
<div id="container" style="height: 100%;width:1250px;background: black"></div>

<script type="text/javascript" src="../echarts.js"></script>
<script type="text/javascript" src="../dataTool.js"></script>
<script type="text/javascript" src="../echarts-gl.js"></script>
<script src="../jquery-3.5.1.js"></script>


<script type="text/javascript">
  var dom = document.getElementById("container");
  var myChart = echarts.init(dom);
  var app = {};

  var option;



  $.getScript(
          'https://cdn.jsdelivr.net/npm/simplex-noise@2.4.0/simplex-noise.js'
  ).done(function () {
    var noise = new SimplexNoise(Math.random);
    function generateData(theta, min, max) {
      var temp = [

        255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
        255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 246, 255, 255, 246, 247, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
        255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 247, 250, 247, 252, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
        255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 251, 218, 245, 199, 158, 211, 242, 254, 251, 247, 247, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
        255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 246, 255, 249, 235, 136, 179, 159, 130, 128, 156, 184, 219, 250, 248, 252, 252, 255, 255, 255, 255, 255, 255, 255, 255, 255,
        255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 246, 247, 254, 177, 123, 122, 109, 127, 124, 115, 115, 123, 161, 164, 171, 207, 255, 255, 255, 255, 255, 255, 255, 255, 255,
        255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 253, 201, 146, 128, 112, 120, 132, 125, 110, 127, 123, 117, 135, 139, 136, 132, 167, 235, 255, 255, 255, 255, 255, 255, 255,
        255, 255, 255, 255, 255, 255, 246, 246, 246, 246, 248, 252, 253, 236, 144, 120, 144, 113, 123, 135, 132, 108, 128, 99, 112, 140, 144, 144, 142, 147, 166, 233, 251, 255, 255, 255, 255, 255,
        255, 255, 255, 255, 255, 255, 255, 247, 250, 253, 242, 216, 171, 142, 114, 104, 112, 127, 139, 129, 127, 136, 109, 93, 102, 143, 144, 142, 149, 172, 168, 169, 240, 255, 255, 255, 255, 255,
        255, 255, 255, 255, 255, 247, 253, 251, 227, 186, 132, 120, 122, 130, 134, 128, 102, 111, 125, 125, 128, 114, 109, 99, 131, 144, 141, 151, 172, 173, 173, 181, 195, 255, 255, 255, 255, 255,
        255, 255, 255, 246, 249, 247, 203, 156, 128, 132, 143, 152, 157, 155, 150, 144, 137, 113, 112, 103, 114, 115, 100, 120, 143, 144, 159, 173, 173, 179, 192, 205, 181, 211, 251, 255, 255, 255,
        255, 255, 255, 248, 240, 176, 137, 144, 162, 176, 178, 172, 169, 180, 179, 171, 157, 147, 133, 115, 104, 111, 125, 142, 150, 167, 175, 175, 191, 202, 204, 202, 202, 184, 241, 247, 255, 255,
        255, 255, 255, 251, 192, 152, 178, 187, 196, 195, 190, 187, 180, 182, 165, 183, 191, 173, 160, 151, 143, 143, 152, 162, 174, 173, 176, 197, 204, 202, 202, 203, 204, 186, 223, 250, 255, 255,
        255, 255, 255, 236, 156, 183, 200, 174, 157, 143, 137, 142, 157, 178, 186, 173, 181, 201, 185, 172, 167, 167, 172, 173, 173, 181, 198, 203, 202, 203, 203, 203, 202, 190, 203, 251, 255, 255,
        255, 255, 255, 217, 167, 193, 147, 128, 133, 155, 168, 166, 140, 128, 145, 180, 177, 175, 201, 196, 188, 184, 184, 187, 193, 202, 203, 203, 202, 197, 188, 181, 178, 170, 174, 250, 255, 255,
        255, 255, 255, 217, 177, 141, 126, 192, 236, 254, 254, 255, 245, 212, 145, 125, 163, 184, 167, 198, 205, 203, 203, 203, 203, 203, 203, 192, 181, 174, 172, 174, 174, 173, 164, 241, 255, 255,
        255, 255, 255, 219, 154, 127, 209, 255, 255, 255, 247, 249, 255, 255, 252, 204, 132, 145, 185, 172, 194, 203, 202, 202, 201, 202, 187, 175, 168, 151, 153, 169, 168, 171, 164, 236, 255, 255,
        255, 255, 255, 217, 132, 162, 255, 255, 255, 252, 254, 253, 255, 251, 247, 254, 230, 142, 129, 184, 177, 199, 202, 202, 204, 184, 164, 157, 146, 142, 142, 144, 143, 146, 152, 234, 255, 255,
        255, 255, 255, 214, 120, 172, 255, 255, 250, 244, 255, 253, 247, 253, 246, 254, 255, 247, 164, 130, 171, 183, 206, 203, 175, 145, 142, 141, 143, 144, 144, 144, 143, 142, 140, 234, 255, 255,
        255, 255, 255, 214, 118, 179, 255, 254, 250, 254, 255, 255, 255, 255, 255, 254, 248, 254, 254, 162, 146, 181, 203, 183, 144, 141, 144, 144, 143, 144, 144, 144, 143, 143, 139, 233, 255, 255,
        255, 255, 255, 215, 118, 180, 255, 246, 255, 243, 200, 193, 202, 230, 254, 255, 255, 255, 255, 241, 140, 161, 195, 167, 141, 144, 144, 144, 144, 144, 144, 144, 144, 144, 136, 230, 255, 255,
        255, 255, 255, 218, 123, 177, 255, 251, 238, 192, 219, 229, 219, 205, 206, 223, 255, 253, 246, 254, 160, 155, 186, 153, 142, 143, 144, 144, 143, 144, 143, 143, 144, 143, 137, 227, 255, 255,
        255, 255, 255, 222, 134, 167, 255, 255, 194, 227, 248, 245, 246, 248, 241, 208, 203, 255, 249, 254, 157, 153, 175, 146, 141, 141, 141, 141, 141, 141, 141, 141, 141, 142, 130, 200, 255, 255,
        255, 255, 255, 223, 144, 165, 254, 255, 195, 239, 244, 243, 243, 243, 244, 250, 205, 243, 255, 246, 133, 154, 170, 146, 137, 139, 138, 138, 138, 138, 138, 139, 137, 131, 140, 207, 255, 255,
        255, 255, 255, 221, 151, 171, 252, 255, 200, 239, 244, 243, 243, 245, 238, 230, 194, 228, 254, 217, 115, 156, 169, 142, 135, 136, 135, 136, 136, 136, 135, 126, 127, 174, 255, 255, 255, 255,
        255, 255, 255, 221, 130, 178, 254, 255, 199, 240, 244, 243, 246, 235, 198, 202, 174, 231, 253, 184, 116, 161, 149, 133, 133, 133, 134, 133, 134, 126, 129, 182, 209, 209, 255, 255, 255, 255,
        255, 255, 255, 243, 176, 229, 254, 255, 196, 232, 244, 247, 226, 195, 206, 201, 163, 244, 255, 165, 120, 155, 131, 131, 131, 131, 132, 130, 120, 149, 214, 251, 233, 200, 255, 255, 255, 255,
        255, 255, 255, 252, 205, 232, 254, 255, 196, 220, 230, 217, 194, 207, 190, 143, 146, 254, 255, 160, 119, 149, 131, 128, 129, 130, 121, 123, 181, 246, 244, 237, 196, 208, 255, 255, 255, 255,
        255, 255, 255, 252, 204, 223, 255, 255, 203, 234, 227, 192, 211, 183, 134, 127, 156, 251, 254, 157, 122, 157, 129, 125, 121, 114, 154, 217, 253, 242, 203, 189, 210, 243, 255, 255, 255, 255,
        255, 255, 255, 249, 228, 189, 254, 253, 199, 199, 233, 200, 172, 136, 133, 130, 163, 251, 250, 149, 130, 158, 121, 113, 141, 203, 252, 248, 219, 179, 202, 255, 255, 255, 255, 255, 255, 255,
        255, 255, 255, 248, 230, 194, 254, 247, 251, 220, 191, 155, 118, 127, 132, 116, 172, 255, 254, 142, 127, 128, 125, 197, 241, 254, 240, 211, 197, 227, 240, 255, 255, 255, 255, 255, 255, 255,
        255, 255, 255, 255, 246, 209, 254, 255, 255, 255, 248, 230, 201, 146, 135, 163, 244, 255, 255, 159, 134, 173, 237, 255, 246, 207, 190, 213, 235, 241, 255, 246, 255, 255, 255, 255, 255, 255,
        255, 255, 255, 247, 247, 203, 187, 207, 253, 250, 248, 255, 255, 255, 252, 255, 255, 251, 250, 202, 249, 252, 251, 227, 205, 209, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
        255, 255, 255, 255, 245, 237, 225, 198, 202, 192, 212, 232, 250, 255, 247, 255, 255, 251, 235, 210, 255, 233, 198, 192, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
        255, 255, 255, 255, 255, 247, 244, 243, 236, 234, 198, 179, 196, 210, 200, 217, 208, 245, 203, 191, 207, 179, 207, 237, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
        255, 255, 255, 255, 255, 255, 247, 247, 247, 255, 247, 247, 221, 202, 220, 196, 199, 202, 200, 193, 209, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
        255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 247, 255, 255, 243, 245, 244, 241, 243, 245, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,
        255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255

      ]
      var data = [];

      for (var i = 0; i < 38; i++) {
        for (var j = 0; j < 38; j++) {
          var value = noise.noise2D(i/8 , j/8 );
          valMax = Math.max(valMax, value);
          valMin = Math.min(valMin, value);
          data.push([i, j, value+(255-temp[i*38+j])/20]);

        }
      }
      return data;
    }
    var valMin = Infinity;
    var valMax = -Infinity;
    var data = generateData(2, -5, 5);
    console.log(valMin, valMax);
    myChart.setOption(
            (option = {
              visualMap: {
                show: false,
                min: 0,
                max: 15,
                inRange: {
                  color: [
                    '#313695',
                    '#4575b4',
                    '#74add1',
                    '#abd9e9',
                    '#e0f3f8',
                    '#ffffbf',
                    '#fee090',
                    '#fdae61',
                    '#f46d43',
                    '#d73027',
                    '#a50026'
                  ]
                }
              },
              xAxis3D: {
                type: 'value'
              },
              yAxis3D: {
                type: 'value'
              },
              zAxis3D: {
                type: 'value',
                max: 20,
                min: 0
              },
              grid3D: {
                axisLine: {
                  lineStyle: { color: '#fff' }
                },
                axisPointer: {
                  lineStyle: { color: '#fff' }
                },
                viewControl: {
                  // autoRotate: true
                },
                light: {
                  main: {
                    shadow: true,
                    quality: 'ultra',
                    intensity: 1.5
                  }
                }
              },
              series: [
                {
                  type: 'bar3D',
                  data: data,
                  shading: 'lambert',
                  label: {
                    formatter: function (param) {
                      return param.value[2].toFixed(1);
                    }
                  }
                }
              ]
            })
    );
  });

  if (option && typeof option === 'object') {
    myChart.setOption(option);
  }

</script>
</body>
</html>